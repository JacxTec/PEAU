import{A as se,B as pe,C as me,D as ge,F as ue,J as _e,K as be,L as he,b as H,c as K,d as q,e as Y,g as J,h as Q,i as X,j as Z,k as $,m as ee,p as te,r as ne,s as oe,t as ie,u as re,v as ae,w as le,y as de,z as ce}from"./chunk-DVIHQP7D.js";import"./chunk-C7KSNPXR.js";import"./chunk-MLITWJKX.js";import"./chunk-AZ42ZEWZ.js";import"./chunk-HXCUL745.js";import"./chunk-VPRXME5Z.js";import"./chunk-7NUAEEZI.js";import"./chunk-GGYCPJLF.js";import"./chunk-SPBC2VTA.js";import"./chunk-GW46MFA3.js";import"./chunk-5XJPDQHM.js";import"./chunk-CBQVHAUV.js";import"./chunk-JI3U4LTM.js";import"./chunk-DZIVJ5CH.js";import"./chunk-EML5T6PA.js";import"./chunk-AOQMC3E2.js";import"./chunk-AZZKIBSE.js";import{a as G,b as fe}from"./chunk-UQEDFIV4.js";import{$ as z,_ as D,b as k,c as A,ca as R,da as U,f as L,g as F,i as B,k as j,l as N}from"./chunk-SGLTSWFD.js";import{Da as y,Gb as Pe,Ia as P,Sa as _,Ta as o,Ua as t,Va as E,Wa as S,Xa as T,Z as b,Za as I,_ as h,ab as w,bb as u,jb as r,kb as O,lb as f,mb as W,nb as V,ob as s,pb as p,qb as m,ua as d,za as C}from"./chunk-QWAS3EZK.js";import"./chunk-KEJ45EKG.js";import"./chunk-5MOWLMTA.js";import"./chunk-R3L674RR.js";import"./chunk-2DM4H4V6.js";import"./chunk-UIXHCKZR.js";import"./chunk-KSPK2N7P.js";import"./chunk-DHI5U5DK.js";import"./chunk-3WMZ6HJK.js";import"./chunk-5BOC5REY.js";import{a as v,e as xe,h as M}from"./chunk-M5U6FIFB.js";function we(c,g){if(c&1&&(o(0,"ion-select-option",16),r(1),t()),c&2){let i=g.$implicit;_("value",i.id),d(),f(" ",i.nombre," ")}}function Ee(c,g){if(c&1&&(o(0,"ion-row",17),E(1,"ion-img",18),t()),c&2){let i=u();d(),_("src",i.nuevoProducto.imagen_base64)}}function Ce(c,g){if(c&1&&(o(0,"ion-select-option",16),r(1),t()),c&2){let i=g.$implicit;_("value",i.id),d(),V(" ",i.nombre," (",i.marca," - ",i.modelo,") ")}}function ve(c,g){if(c&1&&(o(0,"ion-select-option",16),r(1),t()),c&2){let i=g.$implicit;_("value",i.id),d(),f(" ",i.nombre," ")}}function Me(c,g){if(c&1&&(o(0,"ion-row",17),E(1,"ion-img",18),t()),c&2){let i=u(2);d(),_("src",i.productoEditable.imagen_base64)}}function ye(c,g){if(c&1){let i=I();S(0),o(1,"ion-list")(2,"ion-item")(3,"ion-label",4),r(4,"Nombre"),t(),o(5,"ion-input",5),m("ngModelChange",function(n){b(i);let e=u();return p(e.productoEditable.nombre,n)||(e.productoEditable.nombre=n),h(n)}),t()(),o(6,"ion-item")(7,"ion-label",4),r(8,"Descripci\xF3n"),t(),o(9,"ion-textarea",5),m("ngModelChange",function(n){b(i);let e=u();return p(e.productoEditable.descripcion,n)||(e.productoEditable.descripcion=n),h(n)}),t()(),o(10,"ion-item")(11,"ion-label",4),r(12,"Marca"),t(),o(13,"ion-input",5),m("ngModelChange",function(n){b(i);let e=u();return p(e.productoEditable.marca,n)||(e.productoEditable.marca=n),h(n)}),t()(),o(14,"ion-item")(15,"ion-label",4),r(16,"Modelo"),t(),o(17,"ion-input",5),m("ngModelChange",function(n){b(i);let e=u();return p(e.productoEditable.modelo,n)||(e.productoEditable.modelo=n),h(n)}),t()(),o(18,"ion-item")(19,"ion-label",4),r(20,"Voltaje"),t(),o(21,"ion-input",5),m("ngModelChange",function(n){b(i);let e=u();return p(e.productoEditable.voltaje,n)||(e.productoEditable.voltaje=n),h(n)}),t()(),o(22,"ion-item")(23,"ion-label",4),r(24,"Potencia"),t(),o(25,"ion-input",5),m("ngModelChange",function(n){b(i);let e=u();return p(e.productoEditable.potencia,n)||(e.productoEditable.potencia=n),h(n)}),t()(),o(26,"ion-item")(27,"ion-label",4),r(28,"Corriente"),t(),o(29,"ion-input",5),m("ngModelChange",function(n){b(i);let e=u();return p(e.productoEditable.corriente,n)||(e.productoEditable.corriente=n),h(n)}),t()(),o(30,"ion-item")(31,"ion-label",4),r(32,"Precio"),t(),o(33,"ion-input",6),m("ngModelChange",function(n){b(i);let e=u();return p(e.productoEditable.precio,n)||(e.productoEditable.precio=n),h(n)}),t()(),o(34,"ion-item")(35,"ion-label"),r(36,"Proveedor"),t(),o(37,"ion-select",5),m("ngModelChange",function(n){b(i);let e=u();return p(e.productoEditable.proveedor_id,n)||(e.productoEditable.proveedor_id=n),h(n)}),P(38,ve,2,2,"ion-select-option",7),t()(),o(39,"ion-item")(40,"ion-label"),r(41,"Imagen"),t(),o(42,"input",8),w("change",function(n){b(i);let e=u();return h(e.onFileSelectedEditar(n))}),t()()(),P(43,Me,2,1,"ion-row",9),o(44,"ion-button",19),w("click",function(){b(i);let n=u();return h(n.guardarEdicion())}),r(45," Guardar Cambios "),t(),o(46,"ion-button",20),w("click",function(){b(i);let n=u();return h(n.eliminarProducto(n.productoEditable.id))}),r(47," Eliminar Producto "),t(),T()}if(c&2){let i=u();d(5),s("ngModel",i.productoEditable.nombre),d(4),s("ngModel",i.productoEditable.descripcion),d(4),s("ngModel",i.productoEditable.marca),d(4),s("ngModel",i.productoEditable.modelo),d(4),s("ngModel",i.productoEditable.voltaje),d(4),s("ngModel",i.productoEditable.potencia),d(4),s("ngModel",i.productoEditable.corriente),d(4),s("ngModel",i.productoEditable.precio),d(4),s("ngModel",i.productoEditable.proveedor_id),d(),_("ngForOf",i.proveedores),d(5),_("ngIf",i.productoEditable.imagen_base64)}}function Se(c,g){if(c&1&&E(0,"ion-img",18),c&2){let i=u().$implicit;_("src",i.imagen_base64)}}function Te(c,g){if(c&1&&(o(0,"ion-card")(1,"ion-card-content")(2,"ion-row",21),P(3,Se,1,1,"ion-img",22),t(),o(4,"ion-card-header",23)(5,"ion-card-title"),r(6),t(),o(7,"ion-card-subtitle"),r(8),t()(),o(9,"p",24)(10,"strong"),r(11,"Descripci\xF3n:"),t(),E(12,"br"),r(13),t(),o(14,"ion-grid")(15,"ion-row")(16,"ion-col",25)(17,"strong"),r(18,"Voltaje:"),t(),r(19),t(),o(20,"ion-col",25)(21,"strong"),r(22,"Potencia:"),t(),r(23),t()(),o(24,"ion-row")(25,"ion-col",25)(26,"strong"),r(27,"Corriente:"),t(),r(28),t(),o(29,"ion-col",25)(30,"strong"),r(31,"Precio:"),t(),r(32),t()(),o(33,"ion-row")(34,"ion-col",26)(35,"strong"),r(36,"Proveedor:"),t(),r(37),t()()()()()),c&2){let i=g.$implicit,a=u();d(3),_("ngIf",i.imagen_base64),d(3),O(i.nombre),d(2),W("",i.marca," - ",i.modelo),d(5),f(" ",i.descripcion," "),d(6),f(" ",i.voltaje),d(4),f(" ",i.potencia),d(5),f(" ",i.corriente),d(4),f(" $",i.precio),d(5),f(" ",a.obtenerNombreProveedor(i.proveedor_id))}}var De,Ie=xe(()=>{F();U();N();he();fe();Pe();N();he();F();U();G.setScroll({isDisabled:!1});De=(()=>{let g=class g{constructor(a,n){this.http=a,this.alertCtrl=n,this.segmentoActivo="registrar",this.productos=[],this.proveedores=[],this.previewImage=null,this.imagenFile=null,this.nuevoProducto={nombre:"",descripcion:"",marca:"",modelo:"",voltaje:"",potencia:"",corriente:"",precio:null,imagen_base64:"",proveedor_id:null},this.productoSeleccionadoId=null,this.productoEditable=null,this.apiUrl="https://pe-backend-frontend.onrender.com/api/productos",this.apiProveedores="https://pe-backend-frontend.onrender.com/api/proveedores"}ngOnInit(){this.cargarProductos(),this.cargarProveedores()}cargarProductos(){this.http.get(this.apiUrl).subscribe({next:a=>{this.productos=a},error:a=>{console.error("Error al cargar productos:",a),this.mostrarAlerta("Error al cargar productos")}})}cargarProveedores(){this.http.get(this.apiProveedores).subscribe({next:a=>{this.proveedores=a},error:a=>{console.error("Error al cargar proveedores:",a),this.mostrarAlerta("Error al cargar proveedores")}})}onFileSelected(a){let n=a.target.files[0];if(n){this.imagenFile=n;let e=new FileReader;e.onload=()=>{this.previewImage=e.result,this.nuevoProducto.imagen_base64=e.result},e.readAsDataURL(n)}}onFileSelectedEditar(a){let n=a.target.files[0];if(n){let e=new FileReader;e.onload=()=>{this.productoEditable&&(this.productoEditable.imagen_base64=e.result)},e.readAsDataURL(n)}}registrarProducto(){if(!this.nuevoProducto.nombre){this.mostrarAlerta("El nombre es obligatorio");return}if(this.nuevoProducto.proveedor_id===null){this.mostrarAlerta("Debe seleccionar un proveedor");return}console.log("Producto a registrar:",this.nuevoProducto),this.http.post(`${this.apiUrl}/guardar`,this.nuevoProducto).subscribe({next:()=>{this.mostrarAlerta("Producto registrado correctamente"),this.limpiarNuevoProducto(),this.cargarProductos(),this.segmentoActivo="listar"},error:a=>{console.error("Error al registrar producto:",a),this.mostrarAlerta("Error al registrar producto")}})}limpiarNuevoProducto(){this.nuevoProducto={nombre:"",descripcion:"",marca:"",modelo:"",voltaje:"",potencia:"",corriente:"",precio:null,imagen_base64:"",proveedor_id:null},this.previewImage=null,this.imagenFile=null}cargarProductoSeleccionado(){let a=this.productos.find(n=>n.id===this.productoSeleccionadoId);a?(this.productoEditable=v({},a),this.productoEditable.proveedor_id||(this.productoEditable.proveedor_id=null)):this.productoEditable=null}guardarEdicion(){if(!this.productoEditable||!this.productoEditable.id){this.mostrarAlerta("Producto no v\xE1lido para editar");return}if(this.productoEditable.proveedor_id===null){this.mostrarAlerta("Debe seleccionar un proveedor");return}console.log("Producto a editar:",this.productoEditable);let a=`${this.apiUrl}/${this.productoEditable.id}`;this.http.put(a,this.productoEditable).subscribe({next:()=>{this.mostrarAlerta("Producto actualizado correctamente"),this.cargarProductos(),this.segmentoActivo="listar"},error:n=>{console.error("Error al actualizar producto:",n),this.mostrarAlerta("Error al actualizar producto")}})}eliminarProducto(a){confirm("\xBFEst\xE1s seguro de eliminar este producto?")&&this.http.delete(`${this.apiUrl}/${a}`).subscribe({next:()=>{this.mostrarAlerta("Producto eliminado correctamente"),this.cargarProductos(),this.productoSeleccionadoId=null,this.productoEditable=null,this.segmentoActivo="listar"},error:n=>{console.error("Error al eliminar producto:",n),this.mostrarAlerta("Error al eliminar producto")}})}obtenerNombreProveedor(a){let n=this.proveedores.find(e=>e.id===a);return n?n.nombre:"Sin proveedor"}mostrarAlerta(a){return M(this,null,function*(){yield(yield this.alertCtrl.create({header:"Alerta",message:a,buttons:["OK"]})).present()})}};g.\u0275fac=function(n){return new(n||g)(C(B),C(_e))},g.\u0275cmp=y({type:g,selectors:[["app-tab4"]],decls:79,vars:15,consts:[["value","registrar","content-id","registrar"],["value","editar","content-id","editar"],["value","listar","content-id","listar"],["id","registrar"],["position","floating"],[3,"ngModelChange","ngModel"],["type","number",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","file","accept","image/*",3,"change"],["class","ion-justify-content-center ion-padding",4,"ngIf"],["expand","block","color","primary",3,"click"],["id","editar"],[3,"ngModelChange","ionChange","ngModel"],[4,"ngIf"],["id","listar"],[4,"ngFor","ngForOf"],[3,"value"],[1,"ion-justify-content-center","ion-padding"],[2,"max-width","200px",3,"src"],["expand","block","color","success",3,"click"],["expand","block","color","danger",3,"click"],[1,"ion-justify-content-center","ion-margin-top"],["style","max-width: 200px;",3,"src",4,"ngIf"],[1,"ion-text-center"],[1,"ion-padding-start","ion-padding-end"],["size","6"],["size","12"]],template:function(n,e){n&1&&(E(0,"br")(1,"br")(2,"br"),o(3,"ion-segment")(4,"ion-segment-button",0)(5,"ion-label"),r(6,"Registrar"),t()(),o(7,"ion-segment-button",1)(8,"ion-label"),r(9,"Editar"),t()(),o(10,"ion-segment-button",2)(11,"ion-label"),r(12,"Lista"),t()()(),o(13,"ion-segment-view")(14,"ion-segment-content",3)(15,"ion-card")(16,"ion-card-header")(17,"ion-card-title"),r(18,"Registrar Producto"),t()(),o(19,"ion-card-content")(20,"ion-list")(21,"ion-item")(22,"ion-label",4),r(23,"Nombre"),t(),o(24,"ion-input",5),m("ngModelChange",function(l){return p(e.nuevoProducto.nombre,l)||(e.nuevoProducto.nombre=l),l}),t()(),o(25,"ion-item")(26,"ion-label",4),r(27,"Descripci\xF3n"),t(),o(28,"ion-textarea",5),m("ngModelChange",function(l){return p(e.nuevoProducto.descripcion,l)||(e.nuevoProducto.descripcion=l),l}),t()(),o(29,"ion-item")(30,"ion-label",4),r(31,"Marca"),t(),o(32,"ion-input",5),m("ngModelChange",function(l){return p(e.nuevoProducto.marca,l)||(e.nuevoProducto.marca=l),l}),t()(),o(33,"ion-item")(34,"ion-label",4),r(35,"Modelo"),t(),o(36,"ion-input",5),m("ngModelChange",function(l){return p(e.nuevoProducto.modelo,l)||(e.nuevoProducto.modelo=l),l}),t()(),o(37,"ion-item")(38,"ion-label",4),r(39,"Voltaje"),t(),o(40,"ion-input",5),m("ngModelChange",function(l){return p(e.nuevoProducto.voltaje,l)||(e.nuevoProducto.voltaje=l),l}),t()(),o(41,"ion-item")(42,"ion-label",4),r(43,"Potencia"),t(),o(44,"ion-input",5),m("ngModelChange",function(l){return p(e.nuevoProducto.potencia,l)||(e.nuevoProducto.potencia=l),l}),t()(),o(45,"ion-item")(46,"ion-label",4),r(47,"Corriente"),t(),o(48,"ion-input",5),m("ngModelChange",function(l){return p(e.nuevoProducto.corriente,l)||(e.nuevoProducto.corriente=l),l}),t()(),o(49,"ion-item")(50,"ion-label",4),r(51,"Precio"),t(),o(52,"ion-input",6),m("ngModelChange",function(l){return p(e.nuevoProducto.precio,l)||(e.nuevoProducto.precio=l),l}),t()(),o(53,"ion-item")(54,"ion-label"),r(55,"Proveedor"),t(),o(56,"ion-select",5),m("ngModelChange",function(l){return p(e.nuevoProducto.proveedor_id,l)||(e.nuevoProducto.proveedor_id=l),l}),P(57,we,2,2,"ion-select-option",7),t()(),o(58,"ion-item")(59,"ion-label"),r(60,"Imagen"),t(),o(61,"input",8),w("change",function(l){return e.onFileSelected(l)}),t()()(),P(62,Ee,2,1,"ion-row",9),o(63,"ion-button",10),w("click",function(){return e.registrarProducto()}),r(64," Guardar Producto "),t()()()(),o(65,"ion-segment-content",11)(66,"ion-card")(67,"ion-card-header")(68,"ion-card-title"),r(69,"Editar Producto"),t()(),o(70,"ion-card-content")(71,"ion-item")(72,"ion-label"),r(73,"Seleccionar producto"),t(),o(74,"ion-select",12),m("ngModelChange",function(l){return p(e.productoSeleccionadoId,l)||(e.productoSeleccionadoId=l),l}),w("ionChange",function(){return e.cargarProductoSeleccionado()}),P(75,Ce,2,4,"ion-select-option",7),t()(),P(76,ye,48,11,"ng-container",13),t()()(),o(77,"ion-segment-content",14),P(78,Te,38,10,"ion-card",15),t()()),n&2&&(d(24),s("ngModel",e.nuevoProducto.nombre),d(4),s("ngModel",e.nuevoProducto.descripcion),d(4),s("ngModel",e.nuevoProducto.marca),d(4),s("ngModel",e.nuevoProducto.modelo),d(4),s("ngModel",e.nuevoProducto.voltaje),d(4),s("ngModel",e.nuevoProducto.potencia),d(4),s("ngModel",e.nuevoProducto.corriente),d(4),s("ngModel",e.nuevoProducto.precio),d(4),s("ngModel",e.nuevoProducto.proveedor_id),d(),_("ngForOf",e.proveedores),d(5),_("ngIf",e.nuevoProducto.imagen_base64),d(12),s("ngModel",e.productoSeleccionadoId),d(),_("ngForOf",e.productos),d(),_("ngIf",e.productoEditable),d(2),_("ngForOf",e.productos))},dependencies:[L,k,A,R,D,z,be,Y,J,Q,X,Z,$,ee,te,ne,oe,ie,re,ae,le,de,ce,se,pe,me,ge,ue,H,K,q,j],styles:["ion-icon[_ngcontent-%COMP%]{color:#ff0}#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}ion-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;margin:5% auto;box-shadow:0 2px 6px #01ffd5;transition:transform .2s ease-in-out,box-shadow .2s ease-in-out}ion-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #c2f801;border-radius:12px;transform:scale(1.01)}ion-input[_ngcontent-%COMP%]{margin-top:10px;color:#9acd32;padding-bottom:19px;--padding-start: 12px;border-radius:12px;--border: 1px solid #ff0000;--highlight-color-focused: #00ff00;--color-focused: #00ff00;--border-color: #00ff00}ion-input[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #cff801;border-radius:12px}ion-input[_ngcontent-%COMP%]:focus-within{--border: 2px solid #3880ff}ion-button[_ngcontent-%COMP%]:hover{color:#37ff00;background-color:#0f0;box-shadow:0 4px 12px #cff801;border-radius:12px}ion-segment[_ngcontent-%COMP%]{border-radius:8px;border-color:#0f0;background-color:#fff}ion-content[_ngcontent-%COMP%]{--padding-bottom: env(keyboard-inset-bottom);background-color:#0000}.scrollable-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding-bottom:100px}ion-title[_ngcontent-%COMP%]{background-color:#0000;text-align:center}ion-header[_ngcontent-%COMP%]{color:#000;background-color:#0f0}ion-toolbar[_ngcontent-%COMP%]{color:#ff0;background-color:#000}ion-header[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]{--background: #000 !important;background-color:#000!important}ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{text-align:center;width:100%;justify-content:center;display:flex}.titulo-con-imagen[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;color:#ff0}.icono-izquierda[_ngcontent-%COMP%]{width:24px;height:24px}#Titulo_proveedor[_ngcontent-%COMP%]{color:#0f0}@media (max-width: 480px){ion-card[_ngcontent-%COMP%]{margin:10px}ion-button[_ngcontent-%COMP%]{width:90%}.preview-img[_ngcontent-%COMP%]{width:100px;height:100px}}@media (min-width: 481px) and (max-width: 1024px){ion-card[_ngcontent-%COMP%]{margin:20px}ion-button[_ngcontent-%COMP%]{width:60%}.preview-img[_ngcontent-%COMP%]{width:120px;height:120px}}@media (min-width: 1025px){ion-card[_ngcontent-%COMP%]{width:40%}ion-button[_ngcontent-%COMP%]{width:33%}.preview-img[_ngcontent-%COMP%]{width:140px;height:140px}}ion-label[_ngcontent-%COMP%]{color:#000}ion-content[_ngcontent-%COMP%]{background-color:#0000}.scrollable-card-content[_ngcontent-%COMP%]{max-height:70vh;overflow-y:auto}.preview-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.preview-img[_ngcontent-%COMP%]{width:140px;height:140px;object-fit:cover;border-radius:12px;box-shadow:0 2px 8px #00ff8466;margin-bottom:8px}ion-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;margin:5% auto;box-shadow:0 2px 6px #01ffd5}ion-input[_ngcontent-%COMP%]{margin-top:10px;--padding-start: 12px;border-radius:12px;--border: 1px solid #ff0000;--highlight-color-focused: #00ff00}ion-button[_ngcontent-%COMP%]{width:80%;max-width:300px;margin:10px auto;border-radius:8px;display:block}@media (max-width: 480px){ion-card[_ngcontent-%COMP%]{margin:10px}.preview-img[_ngcontent-%COMP%]{width:100px;height:100px}}@media (min-width: 1025px){ion-card[_ngcontent-%COMP%]{width:40%}.preview-img[_ngcontent-%COMP%]{width:140px;height:140px}}"]});let c=g;return c})()});Ie();export{De as Tab4Page};
