import{c as x,d as J}from"./chunk-VPRXME5Z.js";import{a as y,c as z}from"./chunk-SPBC2VTA.js";import{a as T,d as L,f as Q}from"./chunk-GW46MFA3.js";import{b as C,f as I,g as D,h as R,k as w,u as $}from"./chunk-EML5T6PA.js";import{b as c,c as H}from"./chunk-AOQMC3E2.js";import{a as p,b as k,c as F,e as P,f as A,t as X}from"./chunk-AZZKIBSE.js";import{e as Y,h as u}from"./chunk-M5U6FIFB.js";var v,N,_,q,E,Z,h,O,ye,Ae,Ee,Se,Ce,Ie,ee,te,B,ne,oe,ie,se,b,g,V,De,re,Re,j,G,Te,ae,Le,de,xe,S,le,ke,Fe,Pe,U,ce,ue,me,fe=Y(()=>{"use strict";H();$();Q();X();J();z();v='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), ion-checkbox:not([tabindex^="-"]):not([hidden]):not([disabled]), ion-radio:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',N=(e,n)=>{let t=e.querySelector(v);q(t,n??e)},_=(e,n)=>{let t=Array.from(e.querySelectorAll(v)),o=t.length>0?t[t.length-1]:null;q(o,n??e)},q=(e,n)=>{let t=e,o=e?.shadowRoot;if(o&&(t=o.querySelector(v)||e),t){let i=t.closest("ion-radio-group");i?i.setFocus():w(t)}else n.focus()},E=0,Z=0,h=new WeakMap,O=e=>({create(t){return ee(e,t)},dismiss(t,o,i){return ie(document,t,o,e,i)},getTop(){return u(this,null,function*(){return g(document,e)})}}),ye=O("ion-alert"),Ae=O("ion-action-sheet"),Ee=O("ion-modal"),Se=O("ion-popover"),Ce=e=>{typeof document<"u"&&oe(document);let n=E++;e.overlayIndex=n},Ie=e=>(e.hasAttribute("id")||(e.id=`ion-overlay-${++Z}`),e.id),ee=(e,n)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(e).then(()=>{let t=document.createElement(e);return t.classList.add("overlay-hidden"),Object.assign(t,Object.assign(Object.assign({},n),{hasController:!0})),j(document).appendChild(t),new Promise(o=>C(t,o))}):Promise.resolve(),te=e=>e.classList.contains("overlay-hidden"),B=(e,n)=>{let t=e,o=e?.shadowRoot;o&&(t=o.querySelector(v)||e),t?w(t):n.focus()},ne=(e,n)=>{let t=g(n,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover"),o=e.target;if(!t||!o||t.classList.contains(me))return;let i=()=>{if(t===o)t.lastFocus=void 0;else if(o.tagName==="ION-TOAST")B(t.lastFocus,t);else{let a=R(t);if(!a.contains(o))return;let s=a.querySelector(".ion-overlay-wrapper");if(!s)return;if(s.contains(o)||o===a.querySelector("ion-backdrop"))t.lastFocus=o;else{let d=t.lastFocus;N(s,t),d===n.activeElement&&_(s,t),t.lastFocus=n.activeElement}}},r=()=>{if(t.contains(o))t.lastFocus=o;else if(o.tagName==="ION-TOAST")B(t.lastFocus,t);else{let a=t.lastFocus;N(t),a===n.activeElement&&_(t),t.lastFocus=n.activeElement}};t.shadowRoot?r():i()},oe=e=>{E===0&&(E=1,e.addEventListener("focus",n=>{ne(n,e)},!0),e.addEventListener("ionBackButton",n=>{let t=g(e);t?.backdropDismiss&&n.detail.register(L,()=>{t.dismiss(void 0,S)})}),T()||e.addEventListener("keydown",n=>{if(n.key==="Escape"){let t=g(e);t?.backdropDismiss&&t.dismiss(void 0,S)}}))},ie=(e,n,t,o,i)=>{let r=g(e,o,i);return r?r.dismiss(n,t):Promise.reject("overlay does not exist")},se=(e,n)=>(n===void 0&&(n="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover,ion-toast"),Array.from(e.querySelectorAll(n)).filter(t=>t.overlayIndex>0)),b=(e,n)=>se(e,n).filter(t=>!te(t)),g=(e,n,t)=>{let o=b(e,n);return t===void 0?o[o.length-1]:o.find(i=>i.id===t)},V=(e=!1)=>{let t=j(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))},De=(e,n,t,o,i)=>u(null,null,function*(){var r,a;if(e.presented)return;e.el.tagName!=="ION-TOAST"&&(V(!0),document.body.classList.add(y)),ce(e.el),U(e.el),e.presented=!0,e.willPresent.emit(),(r=e.willPresentShorthand)===null||r===void 0||r.emit();let s=A(e),d=e.enterAnimation?e.enterAnimation:p.get(n,s==="ios"?t:o);(yield G(e,d,e.el,i))&&(e.didPresent.emit(),(a=e.didPresentShorthand)===null||a===void 0||a.emit()),e.el.tagName!=="ION-TOAST"&&re(e.el),e.keyboardClose&&(document.activeElement===null||!e.el.contains(document.activeElement))&&e.el.focus(),e.el.removeAttribute("aria-hidden")}),re=e=>u(null,null,function*(){let n=document.activeElement;if(!n)return;let t=n?.shadowRoot;t&&(n=t.querySelector(v)||n),yield e.onDidDismiss(),(document.activeElement===null||document.activeElement===document.body)&&n.focus()}),Re=(e,n,t,o,i,r,a)=>u(null,null,function*(){var s,d;if(!e.presented)return!1;let m=(c!==void 0?b(c):[]).filter(f=>f.tagName!=="ION-TOAST");m.length===1&&m[0].id===e.el.id&&(V(!1),document.body.classList.remove(y)),e.presented=!1;try{U(e.el),e.el.style.setProperty("pointer-events","none"),e.willDismiss.emit({data:n,role:t}),(s=e.willDismissShorthand)===null||s===void 0||s.emit({data:n,role:t});let f=A(e),W=e.leaveAnimation?e.leaveAnimation:p.get(o,f==="ios"?i:r);t!==le&&(yield G(e,W,e.el,a)),e.didDismiss.emit({data:n,role:t}),(d=e.didDismissShorthand)===null||d===void 0||d.emit({data:n,role:t}),(h.get(e)||[]).forEach(K=>K.destroy()),h.delete(e),e.el.classList.add("overlay-hidden"),e.el.style.removeProperty("pointer-events"),e.el.lastFocus!==void 0&&(e.el.lastFocus=void 0)}catch(f){F(`[${e.el.tagName.toLowerCase()}] - `,f)}return e.el.remove(),ue(),!0}),j=e=>e.querySelector("ion-app")||e.body,G=(e,n,t,o)=>u(null,null,function*(){t.classList.remove("overlay-hidden");let i=e.el,r=n(i,o);(!e.animated||!p.getBoolean("animated",!0))&&r.duration(0),e.keyboardClose&&r.beforeAddWrite(()=>{let s=t.ownerDocument.activeElement;s?.matches("input,ion-input, ion-textarea")&&s.blur()});let a=h.get(e)||[];return h.set(e,[...a,r]),yield r.play(),!0}),Te=(e,n)=>{let t,o=new Promise(i=>t=i);return ae(e,n,i=>{t(i.detail)}),o},ae=(e,n,t)=>{let o=i=>{D(e,n,o),t(i)};I(e,n,o)},Le=e=>e==="cancel"||e===S,de=e=>e(),xe=(e,n)=>{if(typeof e=="function")return p.get("_zoneGate",de)(()=>{try{return e(n)}catch(o){throw o}})},S="backdrop",le="gesture",ke=39,Fe=e=>{let n=!1,t,o=x(),i=(s=!1)=>{if(t&&!s)return{delegate:t,inline:n};let{el:d,hasController:l,delegate:m}=e;return n=d.parentNode!==null&&!l,t=n?m||o:m,{inline:n,delegate:t}};return{attachViewToDom:s=>u(null,null,function*(){let{delegate:d}=i(!0);if(d)return yield d.attachViewToDom(e.el,s);let{hasController:l}=e;if(l&&s!==void 0)throw new Error("framework delegate is missing");return null}),removeViewFromDom:()=>{let{delegate:s}=i();s&&e.el!==void 0&&s.removeViewFromDom(e.el.parentElement,e.el)}}},Pe=()=>{let e,n=()=>{e&&(e(),e=void 0)};return{addClickListener:(o,i)=>{n();let r=i!==void 0?document.getElementById(i):null;if(!r){k(`[${o.tagName.toLowerCase()}] - A trigger element with the ID "${i}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,o);return}e=((s,d)=>{let l=()=>{d.present()};return s.addEventListener("click",l),()=>{s.removeEventListener("click",l)}})(r,o)},removeClickListener:n}},U=e=>{c!==void 0&&P("android")&&e.setAttribute("aria-hidden","true")},ce=e=>{var n;if(c===void 0)return;let t=b(c);for(let o=t.length-1;o>=0;o--){let i=t[o],r=(n=t[o+1])!==null&&n!==void 0?n:e;(r.hasAttribute("aria-hidden")||r.tagName!=="ION-TOAST")&&i.setAttribute("aria-hidden","true")}},ue=()=>{if(c===void 0)return;let e=b(c);for(let n=e.length-1;n>=0;n--){let t=e[n];if(t.removeAttribute("aria-hidden"),t.tagName!=="ION-TOAST")break}},me="ion-disable-focus-trap"});export{N as a,_ as b,ye as c,Ae as d,Ee as e,Se as f,Ce as g,Ie as h,g as i,De as j,Re as k,Te as l,Le as m,xe as n,S as o,le as p,ke as q,Fe as r,Pe as s,me as t,fe as u};
