import{A as oe,B as ae,C as re,D as ce,E as le,H as de,I as se,K as ge,L as pe,b as Y,c as $,d as j,e as H,g as q,h as R,i as K,j as G,k as J,n as Q,o as U,q as X,s as Z,t as ee,u as te,y as ne,z as ie}from"./chunk-DVIHQP7D.js";import"./chunk-C7KSNPXR.js";import"./chunk-MLITWJKX.js";import"./chunk-AZ42ZEWZ.js";import"./chunk-HXCUL745.js";import"./chunk-VPRXME5Z.js";import"./chunk-7NUAEEZI.js";import"./chunk-GGYCPJLF.js";import"./chunk-SPBC2VTA.js";import"./chunk-GW46MFA3.js";import"./chunk-5XJPDQHM.js";import"./chunk-CBQVHAUV.js";import"./chunk-JI3U4LTM.js";import"./chunk-DZIVJ5CH.js";import"./chunk-EML5T6PA.js";import"./chunk-AOQMC3E2.js";import"./chunk-AZZKIBSE.js";import{a as N,b as _e}from"./chunk-UQEDFIV4.js";import{$ as D,_ as B,b as z,c as I,ca as A,da as L,f as E,g as k,i as V,k as W,l as F}from"./chunk-SGLTSWFD.js";import{Da as O,Gb as ue,Ia as _,Sa as g,Ta as n,Ua as i,Wa as y,Xa as T,Z as m,Za as P,_ as u,ab as b,bb as p,jb as a,kb as w,lb as M,mb as v,ob as h,pb as f,qb as C,ua as c,za as S}from"./chunk-QWAS3EZK.js";import"./chunk-KEJ45EKG.js";import"./chunk-5MOWLMTA.js";import"./chunk-R3L674RR.js";import"./chunk-2DM4H4V6.js";import"./chunk-UIXHCKZR.js";import"./chunk-KSPK2N7P.js";import"./chunk-DHI5U5DK.js";import"./chunk-3WMZ6HJK.js";import"./chunk-5BOC5REY.js";import{e as me}from"./chunk-M5U6FIFB.js";function he(r,d){if(r&1&&(n(0,"ion-select-option",18),a(1),i()),r&2){let o=d.$implicit;g("value",o.nombre),c(),M(" ",o.nombre," ")}}function fe(r,d){if(r&1){let o=P();n(0,"ion-item")(1,"ion-label",9),a(2,"Nombre del nuevo cliente"),i(),n(3,"ion-input",0),C("ngModelChange",function(t){m(o);let e=p();return f(e.nuevaCotizacion.cliente,t)||(e.nuevaCotizacion.cliente=t),u(t)}),i()()}if(r&2){let o=p();c(3),h("ngModel",o.nuevaCotizacion.cliente)}}function Ce(r,d){if(r&1){let o=P();n(0,"ion-item")(1,"ion-label",9),a(2,"Cliente"),i(),n(3,"ion-input",19),C("ngModelChange",function(t){m(o);let e=p();return f(e.nuevaCotizacion.cliente,t)||(e.nuevaCotizacion.cliente=t),u(t)}),i()()}if(r&2){let o=p();c(3),h("ngModel",o.nuevaCotizacion.cliente),g("readonly",!0)}}function xe(r,d){if(r&1&&(n(0,"ion-select-option",18),a(1),i()),r&2){let o=d.$implicit;g("value",o.id),c(),v(" ",o.nombre," - $",o.precio," ")}}function be(r,d){if(r&1){let o=P();y(0),n(1,"ion-item")(2,"ion-label"),a(3),i(),n(4,"ion-select",20),C("ngModelChange",function(t){let e=m(o).$implicit;return f(e.id,t)||(e.id=t),u(t)}),b("ionChange",function(){m(o);let t=p();return u(t.calcularTotal())}),_(5,xe,2,3,"ion-select-option",6),i()(),n(6,"ion-item")(7,"ion-label",9),a(8,"Cantidad"),i(),n(9,"ion-input",21),C("ngModelChange",function(t){let e=m(o).$implicit;return f(e.cantidad,t)||(e.cantidad=t),u(t)}),b("ionChange",function(){m(o);let t=p();return u(t.calcularTotal())}),i()(),T()}if(r&2){let o=d.$implicit,l=d.index,t=p();c(3),M("Producto ",l+1),c(),h("ngModel",o.id),c(),g("ngForOf",t.productosDisponibles),c(4),h("ngModel",o.cantidad)}}function Me(r,d){if(r&1){let o=P();n(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),a(3),i(),n(4,"ion-card-subtitle"),a(5),i()(),n(6,"ion-card-content")(7,"p")(8,"strong"),a(9,"Total:"),i(),a(10),i(),n(11,"ion-button",22),b("click",function(){let t=m(o).$implicit,e=p();return u(e.eliminarCotizacion(t.id))}),a(12,"Eliminar"),i()()()}if(r&2){let o=d.$implicit;c(3),w(o.cliente),c(2),w(o.fecha),c(5),M(" $",o.total)}}function Pe(r,d){if(r&1&&(n(0,"li"),a(1),i()),r&2){let o=d.$implicit;c(),v(" ",o.nombre," - ",o.cantidad," unidades ")}}function we(r,d){if(r&1&&(n(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),a(3),i(),n(4,"ion-card-subtitle"),a(5),i()(),n(6,"ion-card-content")(7,"p")(8,"strong"),a(9,"Total:"),i(),a(10),i(),n(11,"ul"),_(12,Pe,2,2,"li",11),i()()()),r&2){let o=d.$implicit;c(3),w(o.cliente),c(2),w(o.fecha),c(5),M(" $",o.total),c(2),g("ngForOf",o.productos)}}var Fe,ve=me(()=>{k();L();F();pe();_e();ue();F();pe();k();L();N.setScroll({isDisabled:!1});Fe=(()=>{let d=class d{constructor(l){this.http=l,this.segmentoActivo="first",this.productosDisponibles=[],this.cotizaciones=[],this.clientesDisponibles=[],this.clienteSeleccionado="",this.totalCotizacion=0,this.nuevaCotizacion={cliente:"",fecha:"",productos:[{id:null,cantidad:1}]},this.apiBase="https://pe-backend-frontend.onrender.com/api"}ngOnInit(){this.cargarProductos(),this.cargarCotizaciones(),this.cargarClientes()}cargarProductos(){this.http.get(`${this.apiBase}/productos`).subscribe(l=>{this.productosDisponibles=l})}cargarCotizaciones(){this.http.get(`${this.apiBase}/cotizaciones`).subscribe(l=>{this.cotizaciones=l})}cargarClientes(){this.http.get(`${this.apiBase}/clientes`).subscribe(l=>{this.clientesDisponibles=l})}verificarClienteSeleccionado(){this.clienteSeleccionado&&this.clienteSeleccionado!=="otro"?this.nuevaCotizacion.cliente=this.clienteSeleccionado:this.nuevaCotizacion.cliente=""}agregarProducto(){this.nuevaCotizacion.productos.push({id:null,cantidad:1}),this.calcularTotal()}calcularTotal(){this.totalCotizacion=this.nuevaCotizacion.productos.reduce((l,t)=>{let x=this.productosDisponibles.find(s=>s.id===t.id)?.precio||0;return l+x*(t.cantidad||0)},0)}registrarCotizacion(){let l=this.nuevaCotizacion.productos.filter(e=>e.id&&e.cantidad>0);if(!this.nuevaCotizacion.cliente||!this.nuevaCotizacion.fecha||l.length===0){alert("Por favor completa todos los campos y al menos un producto v\xE1lido.");return}let t={cliente:this.nuevaCotizacion.cliente,fecha:this.nuevaCotizacion.fecha,productos:l};this.http.post(`${this.apiBase}/cotizaciones`,t).subscribe(()=>{alert("Cotizaci\xF3n registrada con \xE9xito"),this.resetFormulario(),this.cargarCotizaciones(),this.segmentoActivo="third"},e=>{alert("Error al registrar cotizaci\xF3n"),console.error(e)})}eliminarCotizacion(l){confirm("\xBFSeguro que quieres eliminar esta cotizaci\xF3n?")&&this.http.delete(`${this.apiBase}/cotizaciones/${l}`).subscribe(()=>{alert("Cotizaci\xF3n eliminada"),this.cotizaciones=this.cotizaciones.filter(t=>t.id!==l)},t=>{alert("Error al eliminar cotizaci\xF3n"),console.error(t)})}resetFormulario(){this.clienteSeleccionado="",this.nuevaCotizacion={cliente:"",fecha:"",productos:[{id:null,cantidad:1}]},this.totalCotizacion=0}};d.\u0275fac=function(t){return new(t||d)(S(V))},d.\u0275cmp=O({type:d,selectors:[["app-tab5"]],decls:50,vars:10,consts:[[3,"ngModelChange","ngModel"],["value","first","content-id","first"],["value","second","content-id","second"],["value","third","content-id","third"],["id","first"],["placeholder","Selecciona un cliente",3,"ngModelChange","ionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["value","otro"],[4,"ngIf"],["position","floating"],["display-format","YYYY-MM-DD",3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],["expand","block",3,"click"],["lines","none",1,"ion-margin-top"],["color","primary"],["expand","block","color","success",3,"click"],["id","second"],["id","third"],[3,"value"],[3,"ngModelChange","ngModel","readonly"],["placeholder","Selecciona un producto",3,"ngModelChange","ionChange","ngModel"],["type","number",3,"ngModelChange","ionChange","ngModel"],["color","danger",3,"click"]],template:function(t,e){t&1&&(n(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),a(3,"Cotizaciones"),i()()(),n(4,"ion-content")(5,"ion-segment",0),C("ngModelChange",function(s){return f(e.segmentoActivo,s)||(e.segmentoActivo=s),s}),n(6,"ion-segment-button",1)(7,"ion-label"),a(8,"Registrar"),i()(),n(9,"ion-segment-button",2)(10,"ion-label"),a(11,"Editar/Eliminar"),i()(),n(12,"ion-segment-button",3)(13,"ion-label"),a(14,"Ver"),i()()(),n(15,"ion-segment-view")(16,"ion-segment-content",4)(17,"ion-card")(18,"ion-card-header")(19,"ion-card-title"),a(20,"Nueva Cotizaci\xF3n"),i()(),n(21,"ion-card-content")(22,"ion-item")(23,"ion-label"),a(24,"Cliente"),i(),n(25,"ion-select",5),C("ngModelChange",function(s){return f(e.clienteSeleccionado,s)||(e.clienteSeleccionado=s),s}),b("ionChange",function(){return e.verificarClienteSeleccionado()}),_(26,he,2,2,"ion-select-option",6),n(27,"ion-select-option",7),a(28,"Otro..."),i()()(),_(29,fe,4,1,"ion-item",8)(30,Ce,4,2,"ion-item",8),n(31,"ion-item")(32,"ion-label",9),a(33,"Fecha"),i(),n(34,"ion-datetime",10),C("ngModelChange",function(s){return f(e.nuevaCotizacion.fecha,s)||(e.nuevaCotizacion.fecha=s),s}),i()(),_(35,be,10,4,"ng-container",11),n(36,"ion-button",12),b("click",function(){return e.agregarProducto()}),a(37,"+ Agregar otro producto"),i(),n(38,"ion-item",13)(39,"ion-label")(40,"strong"),a(41,"Total:"),i()(),n(42,"ion-text",14),a(43),i()(),n(44,"ion-button",15),b("click",function(){return e.registrarCotizacion()}),a(45,"Registrar Cotizaci\xF3n"),i()()()(),n(46,"ion-segment-content",16),_(47,Me,13,3,"ion-card",11),i(),n(48,"ion-segment-content",17),_(49,we,13,4,"ion-card",11),i()()()),t&2&&(c(5),h("ngModel",e.segmentoActivo),c(20),h("ngModel",e.clienteSeleccionado),c(),g("ngForOf",e.clientesDisponibles),c(3),g("ngIf",e.clienteSeleccionado==="otro"),c(),g("ngIf",e.clienteSeleccionado!=="otro"),c(4),h("ngModel",e.nuevaCotizacion.fecha),c(),g("ngForOf",e.nuevaCotizacion.productos),c(8),M("$",e.totalCotizacion),c(4),g("ngForOf",e.cotizaciones),c(2),g("ngForOf",e.cotizaciones))},dependencies:[ge,H,q,R,K,G,J,Q,U,X,Z,ee,te,ne,ie,oe,ae,re,ce,le,de,se,Y,$,j,E,z,I,A,B,D,W],styles:["ion-icon[_ngcontent-%COMP%]{color:#ff0}#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}ion-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;margin:5% auto;box-shadow:0 2px 6px #01ffd5;transition:transform .2s ease-in-out,box-shadow .2s ease-in-out}ion-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #c2f801;border-radius:12px;transform:scale(1.01)}ion-input[_ngcontent-%COMP%]{margin-top:10px;color:#9acd32;padding-bottom:19px;--padding-start: 12px;border-radius:12px;--border: 1px solid #ff0000;--highlight-color-focused: #00ff00;--color-focused: #00ff00;--border-color: #00ff00}ion-input[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #cff801;border-radius:12px}ion-input[_ngcontent-%COMP%]:focus-within{--border: 2px solid #3880ff}ion-button[_ngcontent-%COMP%]:hover{color:#37ff00;background-color:#0f0;box-shadow:0 4px 12px #cff801;border-radius:12px}ion-segment[_ngcontent-%COMP%]{border-radius:8px;border-color:#0f0;background-color:#fff}ion-content[_ngcontent-%COMP%]{--padding-bottom: env(keyboard-inset-bottom);background-color:#0000}.scrollable-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding-bottom:100px}ion-title[_ngcontent-%COMP%]{background-color:#0000;text-align:center}ion-header[_ngcontent-%COMP%]{color:#000;background-color:#0f0}ion-toolbar[_ngcontent-%COMP%]{color:#ff0;background-color:#000}ion-header[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]{--background: #000 !important;background-color:#000!important}ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{text-align:center;width:100%;justify-content:center;display:flex}.titulo-con-imagen[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;color:#ff0}.icono-izquierda[_ngcontent-%COMP%]{width:24px;height:24px}#Titulo_proveedor[_ngcontent-%COMP%]{color:#0f0}@media (max-width: 480px){ion-card[_ngcontent-%COMP%]{margin:10px}ion-button[_ngcontent-%COMP%]{width:90%}.preview-img[_ngcontent-%COMP%]{width:100px;height:100px}}@media (min-width: 481px) and (max-width: 1024px){ion-card[_ngcontent-%COMP%]{margin:20px}ion-button[_ngcontent-%COMP%]{width:60%}.preview-img[_ngcontent-%COMP%]{width:120px;height:120px}}@media (min-width: 1025px){ion-card[_ngcontent-%COMP%]{width:40%}ion-button[_ngcontent-%COMP%]{width:33%}.preview-img[_ngcontent-%COMP%]{width:140px;height:140px}}ion-label[_ngcontent-%COMP%]{color:#000}ion-content[_ngcontent-%COMP%]{background-color:#0000}.scrollable-card-content[_ngcontent-%COMP%]{max-height:70vh;overflow-y:auto}.preview-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.preview-img[_ngcontent-%COMP%]{width:140px;height:140px;object-fit:cover;border-radius:12px;box-shadow:0 2px 8px #00ff8466;margin-bottom:8px}ion-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;margin:5% auto;box-shadow:0 2px 6px #01ffd5}ion-input[_ngcontent-%COMP%]{margin-top:10px;--padding-start: 12px;border-radius:12px;--border: 1px solid #ff0000;--highlight-color-focused: #00ff00}ion-button[_ngcontent-%COMP%]{width:80%;max-width:300px;margin:10px auto;border-radius:8px;display:block}@media (max-width: 480px){ion-card[_ngcontent-%COMP%]{margin:10px}.preview-img[_ngcontent-%COMP%]{width:100px;height:100px}}@media (min-width: 1025px){ion-card[_ngcontent-%COMP%]{width:40%}.preview-img[_ngcontent-%COMP%]{width:140px;height:140px}}"]});let r=d;return r})()});ve();export{Fe as Tab5Page};
