import{A as pe,B as ge,C as _e,D as ue,F as he,G as xe,H as fe,I as be,K as Ce,L as Ie,a as j,b as H,c as q,d as G,e as K,f as J,g as Q,h as X,i as Z,k as ee,l as te,n as ne,o as ie,q as oe,s as re,t as ae,u as ce,v as le,x as se,y as de,z as me}from"./chunk-DVIHQP7D.js";import"./chunk-C7KSNPXR.js";import"./chunk-MLITWJKX.js";import"./chunk-AZ42ZEWZ.js";import"./chunk-HXCUL745.js";import"./chunk-VPRXME5Z.js";import"./chunk-7NUAEEZI.js";import"./chunk-GGYCPJLF.js";import"./chunk-SPBC2VTA.js";import"./chunk-GW46MFA3.js";import"./chunk-5XJPDQHM.js";import"./chunk-CBQVHAUV.js";import"./chunk-JI3U4LTM.js";import"./chunk-DZIVJ5CH.js";import"./chunk-EML5T6PA.js";import"./chunk-AOQMC3E2.js";import"./chunk-AZZKIBSE.js";import{a as Y,b as Pe}from"./chunk-UQEDFIV4.js";import{$,_ as U,b as k,c as F,ca as A,da as N,e as B,f as W,g as L,i as z,k as D,l as R}from"./chunk-SGLTSWFD.js";import{Da as O,Gb as we,Ia as f,Sa as m,Ta as i,Ua as o,Va as w,Z as p,Za as v,_ as g,ab as u,bb as d,jb as l,kb as P,lb as _,mb as V,ob as b,pb as C,qb as I,sa as M,sb as S,tb as y,ua as a,za as T}from"./chunk-QWAS3EZK.js";import"./chunk-KEJ45EKG.js";import"./chunk-5MOWLMTA.js";import"./chunk-R3L674RR.js";import"./chunk-2DM4H4V6.js";import"./chunk-UIXHCKZR.js";import"./chunk-KSPK2N7P.js";import"./chunk-DHI5U5DK.js";import"./chunk-3WMZ6HJK.js";import"./chunk-5BOC5REY.js";import{a as E,e as Me}from"./chunk-M5U6FIFB.js";function Se(c,s){if(c&1&&(i(0,"ion-select-option",19),l(1),o()),c&2){let t=s.$implicit;m("value",t.nombre),a(),V(" ",t.nombre," - ",t.modelo," ")}}function ye(c,s){if(c&1&&(i(0,"ion-select-option",19),l(1),o()),c&2){let t=s.$implicit;m("value",t.id),a(),_(" ",t.nombre," ")}}function Ee(c,s){if(c&1){let t=v();i(0,"ion-segment-content",10)(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title"),l(4),o()(),i(5,"ion-card-content")(6,"ion-item")(7,"ion-label",11),l(8,"Producto"),o(),i(9,"ion-select",12),I("ngModelChange",function(e){p(t);let r=d();return C(r.nuevaImportacion.producto,e)||(r.nuevaImportacion.producto=e),g(e)}),f(10,Se,2,3,"ion-select-option",13),o()(),i(11,"ion-item")(12,"ion-label",11),l(13,"Proveedor"),o(),i(14,"ion-select",14),I("ngModelChange",function(e){p(t);let r=d();return C(r.nuevaImportacion.proveedor_id,e)||(r.nuevaImportacion.proveedor_id=e),g(e)}),f(15,ye,2,2,"ion-select-option",13),o()(),i(16,"ion-item")(17,"ion-label",11),l(18,"Cantidad"),o(),i(19,"ion-input",15),I("ngModelChange",function(e){p(t);let r=d();return C(r.nuevaImportacion.cantidad,e)||(r.nuevaImportacion.cantidad=e),g(e)}),o()(),i(20,"ion-item")(21,"ion-label",11),l(22,"Fecha"),o(),i(23,"ion-datetime",16),I("ngModelChange",function(e){p(t);let r=d();return C(r.nuevaImportacion.fecha,e)||(r.nuevaImportacion.fecha=e),g(e)}),o()(),i(24,"ion-item")(25,"ion-label",11),l(26,"Descripci\xF3n"),o(),i(27,"ion-textarea",17),I("ngModelChange",function(e){p(t);let r=d();return C(r.nuevaImportacion.descripcion,e)||(r.nuevaImportacion.descripcion=e),g(e)}),o()(),i(28,"ion-button",18),u("click",function(){p(t);let e=d();return g(e.guardarImportacion())}),l(29),o()()()()}if(c&2){let t=d();a(4),_(" ",t.nuevaImportacion.id?"Editar Importaci\xF3n":"Registrar Importaci\xF3n"," "),a(5),b("ngModel",t.nuevaImportacion.producto),a(),m("ngForOf",t.productos),a(4),b("ngModel",t.nuevaImportacion.proveedor_id),a(),m("ngForOf",t.proveedores),a(4),b("ngModel",t.nuevaImportacion.cantidad),a(4),b("ngModel",t.nuevaImportacion.fecha),a(4),b("ngModel",t.nuevaImportacion.descripcion),a(2),_(" ",t.nuevaImportacion.id?"Actualizar":"Guardar"," ")}}function Te(c,s){if(c&1){let t=v();i(0,"ion-item")(1,"ion-checkbox",23),u("ionChange",function(){let e=p(t).$implicit,r=d(2);return g(r.toggleSeleccion(e.id))}),o(),i(2,"ion-label")(3,"h3"),l(4),o(),i(5,"p"),l(6),o(),i(7,"p"),l(8),o(),i(9,"p"),l(10),S(11,"date"),o()(),i(12,"ion-button",24),u("click",function(){let e=p(t).$implicit,r=d(2);return g(r.editarImportacion(e))}),l(13," Editar "),o(),i(14,"ion-button",25),u("click",function(){let e=p(t).$implicit,r=d(2);return g(r.eliminarImportacion(e.id))}),l(15," Eliminar "),o()()}if(c&2){let t=s.$implicit,n=d(2);a(),m("checked",n.seleccionados.includes(t.id)),a(3),P(t.producto),a(2),_("Proveedor: ",t.proveedor_nombre),a(2),_("Cantidad: ",t.cantidad),a(2),_("Fecha: ",y(11,5,t.fecha,"dd/MM/yyyy"))}}function Oe(c,s){if(c&1){let t=v();i(0,"ion-segment-content",20)(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title"),l(4,"Editar / Eliminar Importaciones"),o()(),i(5,"ion-card-content")(6,"ion-searchbar",21),I("ngModelChange",function(e){p(t);let r=d();return C(r.filtro,e)||(r.filtro=e),g(e)}),u("ionInput",function(){p(t);let e=d();return g(e.filtrarImportaciones())}),o(),i(7,"ion-list"),f(8,Te,16,8,"ion-item",22),o()()()()}if(c&2){let t=d();a(6),b("ngModel",t.filtro),a(2),m("ngForOf",t.importacionesFiltradas)}}function Ve(c,s){if(c&1&&(i(0,"ion-thumbnail",31),w(1,"img",32),o()),c&2){let t=d().$implicit;a(),m("src",t.imagen_producto,M)}}function ke(c,s){if(c&1&&(i(0,"ion-thumbnail"),w(1,"img",33),o()),c&2){let t=d().$implicit;a(),m("src",t.imagen_proveedor,M)}}function Fe(c,s){if(c&1&&(i(0,"ion-item",28),f(1,Ve,2,1,"ion-thumbnail",29),i(2,"ion-label")(3,"h3"),l(4),o(),i(5,"p"),l(6),o(),i(7,"p"),l(8),o(),i(9,"p"),l(10),S(11,"date"),o(),i(12,"p"),l(13),o(),f(14,ke,2,1,"ion-thumbnail",30),o()()),c&2){let t=s.$implicit;a(),m("ngIf",t.imagen_producto),a(3),P(t.producto),a(2),_("Proveedor: ",t.proveedor_nombre),a(2),_("Cantidad: ",t.cantidad),a(2),_("Fecha: ",y(11,7,t.fecha,"dd/MM/yyyy")),a(3),_("Descripci\xF3n: ",t.descripcion),a(),m("ngIf",t.imagen_proveedor)}}function Be(c,s){if(c&1&&(i(0,"ion-segment-content",26)(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title"),l(4,"Lista de Importaciones"),o()(),i(5,"ion-card-content")(6,"ion-list"),f(7,Fe,15,10,"ion-item",27),o()()()()),c&2){let t=d();a(7),m("ngForOf",t.importaciones)}}var He,We=Me(()=>{L();R();N();Ie();Pe();we();R();L();N();Ie();Y.setScroll({isDisabled:!1});He=(()=>{let s=class s{constructor(n){this.http=n,this.apiBaseUrl="https://pe-backend-frontend.onrender.com/api",this.segmentValue="Registrar",this.proveedores=[],this.productos=[],this.importaciones=[],this.importacionesFiltradas=[],this.seleccionados=[],this.filtro="",this.nuevaImportacion={id:null,producto:"",proveedor_id:null,cantidad:null,fecha:"",descripcion:""}}ngOnInit(){this.cargarProveedores(),this.cargarProductos(),this.cargarImportaciones()}cambiarSegmento(n){this.segmentValue=n.detail.value}cargarProveedores(){this.http.get(`${this.apiBaseUrl}/proveedores`).subscribe(n=>{this.proveedores=n})}cargarProductos(){this.http.get(`${this.apiBaseUrl}/productos`).subscribe(n=>{this.productos=n})}cargarImportaciones(){this.http.get(`${this.apiBaseUrl}/importaciones`).subscribe(n=>{this.importaciones=n,this.importacionesFiltradas=n})}filtrarImportaciones(){let n=this.filtro.toLowerCase();this.importacionesFiltradas=this.importaciones.filter(e=>e.producto.toLowerCase().includes(n)||e.proveedor_nombre&&e.proveedor_nombre.toLowerCase().includes(n))}guardarImportacion(){if(!this.nuevaImportacion.producto||!this.nuevaImportacion.proveedor_id){alert("Por favor, completa el producto y proveedor.");return}let n=!!this.nuevaImportacion.id,e=n?`${this.apiBaseUrl}/importaciones/${this.nuevaImportacion.id}`:`${this.apiBaseUrl}/importaciones`;(n?this.http.put(e,this.nuevaImportacion):this.http.post(e,this.nuevaImportacion)).subscribe(h=>{if(alert(n?"Importaci\xF3n actualizada":"Importaci\xF3n registrada"),n){let x=this.importaciones.findIndex(ve=>ve.id===this.nuevaImportacion.id);x>=0&&(this.importaciones[x]=h)}else this.importaciones.push(h);this.importacionesFiltradas=[...this.importaciones],this.resetFormulario(),this.segmentValue="Lista",this.seleccionados=[]},h=>{alert("Error al guardar la importaci\xF3n"),console.error(h)})}editarImportacion(n){this.nuevaImportacion=E({},n),this.segmentValue="Registrar"}eliminarImportacion(n){confirm("\xBFSeguro que quieres eliminar esta importaci\xF3n?")&&this.http.delete(`${this.apiBaseUrl}/importaciones/${n}`).subscribe(()=>{alert("Importaci\xF3n eliminada"),this.seleccionados=this.seleccionados.filter(e=>e!==n),this.importaciones=this.importaciones.filter(e=>e.id!==n),this.importacionesFiltradas=[...this.importaciones]})}seleccionarTodos(){this.seleccionados=this.importaciones.map(n=>n.id)}toggleSeleccion(n){let e=this.seleccionados.indexOf(n);e>=0?this.seleccionados.splice(e,1):this.seleccionados.push(n)}imprimirTodos(){let n=this.importaciones.filter(r=>this.seleccionados.includes(r.id)),e=window.open("","","width=800,height=600");e&&(e.document.write("<h1>Importaciones Seleccionadas</h1>"),n.forEach(r=>{e.document.write(`<p><strong>${r.producto}</strong> - Cantidad: ${r.cantidad} - Fecha: ${r.fecha}</p>`)}),e.document.close(),e.print())}resetFormulario(){this.nuevaImportacion={id:null,producto:"",proveedor_id:null,cantidad:null,fecha:"",descripcion:""}}};s.\u0275fac=function(e){return new(e||s)(T(z))},s.\u0275cmp=O({type:s,selectors:[["app-tab3"]],decls:24,vars:4,consts:[["slot","end"],[3,"click"],["fullscreen",""],[3,"ngModelChange","ionChange","ngModel"],["value","Registrar","content-id","Registrar"],["value","Editar_Eliminar","content-id","Editar_Eliminar"],["value","Lista","content-id","Lista"],["id","Registrar",4,"ngIf"],["id","Editar_Eliminar",4,"ngIf"],["id","Lista",4,"ngIf"],["id","Registrar"],["position","floating"],["placeholder","Selecciona un producto",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Selecciona proveedor",3,"ngModelChange","ngModel"],["type","number",3,"ngModelChange","ngModel"],["display-format","DD/MM/YYYY",3,"ngModelChange","ngModel"],["rows","3",3,"ngModelChange","ngModel"],["expand","block",3,"click"],[3,"value"],["id","Editar_Eliminar"],["placeholder","Buscar por producto o proveedor",3,"ngModelChange","ionInput","ngModel"],[4,"ngFor","ngForOf"],["slot","start",3,"ionChange","checked"],["color","primary","fill","outline","size","small",3,"click"],["color","danger","fill","outline","size","small",3,"click"],["id","Lista"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],["slot","start",4,"ngIf"],[4,"ngIf"],["slot","start"],["alt","Producto",3,"src"],["alt","Proveedor",3,"src"]],template:function(e,r){e&1&&(i(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),l(3,"Importaciones"),o(),i(4,"ion-buttons",0)(5,"ion-button",1),u("click",function(){return r.seleccionarTodos()}),l(6,"Seleccionar Todos"),o(),i(7,"ion-button",1),u("click",function(){return r.imprimirTodos()}),l(8,"Imprimir Seleccionados"),o()()()(),i(9,"ion-content",2)(10,"ion-segment",3),I("ngModelChange",function(x){return C(r.segmentValue,x)||(r.segmentValue=x),x}),u("ionChange",function(x){return r.cambiarSegmento(x)}),i(11,"ion-segment-button",4)(12,"ion-label"),l(13,"Registrar"),o()(),i(14,"ion-segment-button",5)(15,"ion-label"),l(16,"Editar / Eliminar"),o()(),i(17,"ion-segment-button",6)(18,"ion-label"),l(19,"Lista"),o()()(),i(20,"ion-segment-view"),f(21,Ee,30,9,"ion-segment-content",7)(22,Oe,9,2,"ion-segment-content",8)(23,Be,8,1,"ion-segment-content",9),o()()),e&2&&(a(10),b("ngModel",r.segmentValue),a(11),m("ngIf",r.segmentValue==="Registrar"),a(),m("ngIf",r.segmentValue==="Editar_Eliminar"),a(),m("ngIf",r.segmentValue==="Lista"))},dependencies:[W,k,F,B,A,U,$,D,Ce,K,J,Q,X,Z,ee,te,ne,ie,oe,re,ae,ce,le,se,de,me,pe,ge,_e,ue,he,xe,fe,be,j,H,q,G],styles:["ion-icon[_ngcontent-%COMP%]{color:#ff0}#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}ion-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;margin:5% auto;box-shadow:0 2px 6px #01ffd5;transition:transform .2s ease-in-out,box-shadow .2s ease-in-out}ion-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #c2f801;border-radius:12px;transform:scale(1.01)}ion-input[_ngcontent-%COMP%]{margin-top:10px;color:#9acd32;padding-bottom:19px;--padding-start: 12px;border-radius:12px;--border: 1px solid #ff0000;--highlight-color-focused: #00ff00;--color-focused: #00ff00;--border-color: #00ff00}ion-input[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #cff801;border-radius:12px}ion-input[_ngcontent-%COMP%]:focus-within{--border: 2px solid #3880ff}ion-button[_ngcontent-%COMP%]:hover{color:#37ff00;background-color:#0f0;box-shadow:0 4px 12px #cff801;border-radius:12px}ion-segment[_ngcontent-%COMP%]{border-radius:8px;border-color:#0f0;background-color:#fff}ion-content[_ngcontent-%COMP%]{--padding-bottom: env(keyboard-inset-bottom);background-color:#0000}.scrollable-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding-bottom:100px}ion-title[_ngcontent-%COMP%]{background-color:#0000;text-align:center}ion-header[_ngcontent-%COMP%]{color:#000;background-color:#0f0}ion-toolbar[_ngcontent-%COMP%]{color:#ff0;background-color:#000}ion-header[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]{--background: #000 !important;background-color:#000!important}ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{text-align:center;width:100%;justify-content:center;display:flex}.titulo-con-imagen[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;color:#ff0}.icono-izquierda[_ngcontent-%COMP%]{width:24px;height:24px}#Titulo_proveedor[_ngcontent-%COMP%]{color:#0f0}@media (max-width: 480px){ion-card[_ngcontent-%COMP%]{margin:10px}ion-button[_ngcontent-%COMP%]{width:90%}.preview-img[_ngcontent-%COMP%]{width:100px;height:100px}}@media (min-width: 481px) and (max-width: 1024px){ion-card[_ngcontent-%COMP%]{margin:20px}ion-button[_ngcontent-%COMP%]{width:60%}.preview-img[_ngcontent-%COMP%]{width:120px;height:120px}}@media (min-width: 1025px){ion-card[_ngcontent-%COMP%]{width:40%}ion-button[_ngcontent-%COMP%]{width:33%}.preview-img[_ngcontent-%COMP%]{width:140px;height:140px}}ion-label[_ngcontent-%COMP%]{color:#000}ion-content[_ngcontent-%COMP%]{background-color:#0000}.scrollable-card-content[_ngcontent-%COMP%]{max-height:70vh;overflow-y:auto}.preview-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.preview-img[_ngcontent-%COMP%]{width:140px;height:140px;object-fit:cover;border-radius:12px;box-shadow:0 2px 8px #00ff8466;margin-bottom:8px}ion-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;margin:5% auto;box-shadow:0 2px 6px #01ffd5}ion-input[_ngcontent-%COMP%]{margin-top:10px;--padding-start: 12px;border-radius:12px;--border: 1px solid #ff0000;--highlight-color-focused: #00ff00}ion-button[_ngcontent-%COMP%]{width:80%;max-width:300px;margin:10px auto;border-radius:8px;display:block}@media (max-width: 480px){ion-card[_ngcontent-%COMP%]{margin:10px}.preview-img[_ngcontent-%COMP%]{width:100px;height:100px}}@media (min-width: 1025px){ion-card[_ngcontent-%COMP%]{width:40%}.preview-img[_ngcontent-%COMP%]{width:140px;height:140px}}"]});let c=s;return c})()});We();export{He as Tab3Page};
