import{a as ie,b as le}from"./chunk-UQEDFIV4.js";import{A as te,B as ae,c as A,d as j,e as U,f as R,g as z,h as D,i as N,j as q,k as G,l as H,m as J,n as K,o as Y,p as Q,q as X,t as Z,u as $,x as ee,z as ne}from"./chunk-FYE726L5.js";import{$ as V,_ as L,b as I,c as O,ca as B,da as F,f as k,g as W}from"./chunk-SGLTSWFD.js";import{Da as E,Gb as re,Ia as x,Sa as b,Ta as o,Ua as i,Va as w,Z as f,Za as P,_ as h,ab as m,bb as C,jb as c,kb as T,lb as M,ob as _,pb as p,qb as u,sa as y,ua as a}from"./chunk-QWAS3EZK.js";import"./chunk-H7L2LT5B.js";import"./chunk-KEJ45EKG.js";import"./chunk-5MOWLMTA.js";import"./chunk-R3L674RR.js";import"./chunk-2DM4H4V6.js";import"./chunk-UIXHCKZR.js";import"./chunk-62FC3OZE.js";import"./chunk-KSPK2N7P.js";import"./chunk-B3JVLO7J.js";import"./chunk-D5G3PDSR.js";import"./chunk-DHI5U5DK.js";import"./chunk-3WMZ6HJK.js";import"./chunk-5BOC5REY.js";import{a as v,b as S,e as oe}from"./chunk-M5U6FIFB.js";function ce(d,g){if(d&1){let r=P();o(0,"div"),w(1,"img",19),o(2,"ion-button",20),m("click",function(){f(r);let e=C();return h(e.eliminarImagen())}),c(3,"Eliminar Imagen"),i()()}if(d&2){let r=C();a(),b("src",r.imagenPreview,y)}}function de(d,g){if(d&1&&w(0,"ion-img",25),d&2){let r=C().$implicit;b("src",r.imagen)}}function se(d,g){if(d&1){let r=P();o(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),c(3),i()(),o(4,"ion-card-content")(5,"ion-input",9),u("ngModelChange",function(e){let n=f(r).$implicit;return p(n.nombre,e)||(n.nombre=e),h(e)}),i(),o(6,"ion-input",10),u("ngModelChange",function(e){let n=f(r).$implicit;return p(n.email,e)||(n.email=e),h(e)}),i(),o(7,"ion-input",11),u("ngModelChange",function(e){let n=f(r).$implicit;return p(n.telefono,e)||(n.telefono=e),h(e)}),i(),o(8,"ion-input",12),u("ngModelChange",function(e){let n=f(r).$implicit;return p(n.direccion,e)||(n.direccion=e),h(e)}),i(),x(9,de,1,1,"ion-img",21),o(10,"input",13),m("change",function(e){let n=f(r).$implicit,s=C();return h(s.cambiarImagenCliente(e,n))}),i(),o(11,"ion-button",22),m("click",function(){let e=f(r).$implicit,n=C();return h(n.eliminarImagenCliente(e))}),c(12,"Eliminar Imagen"),i(),o(13,"ion-button",23),m("click",function(){let e=f(r).$implicit,n=C();return h(n.guardarCambiosCliente(e))}),c(14,"Guardar Cambios"),i(),o(15,"ion-button",24),m("click",function(){let e=f(r).$implicit,n=C();return h(n.eliminarCliente(e.id))}),c(16,"Eliminar"),i()()()}if(d&2){let r=g.$implicit;a(3),T(r.nombre),a(2),_("ngModel",r.nombre),a(),_("ngModel",r.email),a(),_("ngModel",r.telefono),a(),_("ngModel",r.direccion),a(),b("ngIf",r.imagen)}}function ge(d,g){if(d&1&&(o(0,"ion-avatar",29),w(1,"img",30),i()),d&2){let r=C().$implicit;a(),b("src",r.imagen,y)}}function me(d,g){if(d&1){let r=P();o(0,"ion-card")(1,"ion-item",26)(2,"ion-checkbox",27),u("ngModelChange",function(e){let n=f(r).$implicit;return p(n.seleccionado,e)||(n.seleccionado=e),h(e)}),i(),x(3,ge,2,1,"ion-avatar",28),o(4,"ion-label")(5,"h2"),c(6),i(),o(7,"p")(8,"strong"),c(9,"Email:"),i(),c(10),i(),o(11,"p")(12,"strong"),c(13,"Tel\xE9fono:"),i(),c(14),i(),o(15,"p")(16,"strong"),c(17,"Direcci\xF3n:"),i(),c(18),i()()()()}if(d&2){let r=g.$implicit;a(2),_("ngModel",r.seleccionado),a(),b("ngIf",r.imagen),a(3),T(r.nombre),a(4),M(" ",r.email),a(4),M(" ",r.telefono),a(4),M(" ",r.direccion)}}function _e(d,g){d&1&&(o(0,"ion-card")(1,"ion-card-content"),c(2,"No hay clientes registrados."),i()())}var Pe,pe=oe(()=>{ae();F();W();le();re();W();F();ie.setScroll({isDisabled:!1});Pe=(()=>{let g=class g{constructor(){this.segmentoActivo="agregar",this.filtroBusqueda="",this.imagenPreview=null,this.nuevoCliente={nombre:"",email:"",telefono:"",direccion:"",imagen:null},this.clientes=[],this.clientesFiltrados=[],this.API_URL="https://pe-backend-frontend.onrender.com/api/clientes",this.cargarClientes()}guardarCliente(){let t={nombre:this.nuevoCliente.nombre,email:this.nuevoCliente.email,telefono:this.nuevoCliente.telefono,direccion:this.nuevoCliente.direccion,imagen:this.nuevoCliente.imagen};fetch(`${this.API_URL}/guardar`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json()).then(()=>{alert("Cliente guardado correctamente"),this.limpiarFormulario(),this.cargarClientes(),this.segmentoActivo="lista"}).catch(e=>{console.error("Error al guardar cliente",e),alert("Error al guardar cliente")})}guardarCambiosCliente(t){fetch(`${this.API_URL}/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:t.nombre,email:t.email,telefono:t.telefono,direccion:t.direccion,imagen:t.imagen})}).then(e=>e.json()).then(()=>{alert("Cambios guardados"),this.cargarClientes()}).catch(e=>{console.error("Error al actualizar cliente:",e),alert("Error al actualizar cliente")})}eliminarCliente(t){confirm("\xBFEliminar este cliente permanentemente?")&&fetch(`${this.API_URL}/${t}`,{method:"DELETE"}).then(e=>e.json()).then(()=>{alert("Cliente eliminado"),this.cargarClientes()}).catch(e=>{console.error("Error al eliminar cliente:",e),alert("Error al eliminar cliente")})}cargarImagen(t){let e=t.target.files[0];if(e){let n=new FileReader;n.onload=()=>{this.nuevoCliente.imagen=n.result,this.imagenPreview=n.result},n.readAsDataURL(e)}}cambiarImagenCliente(t,e){let n=t.target.files[0];if(n){let s=new FileReader;s.onload=()=>{e.imagen=s.result},s.readAsDataURL(n)}}eliminarImagen(){this.nuevoCliente.imagen=null,this.imagenPreview=null}eliminarImagenCliente(t){t.imagen=null}limpiarFormulario(){this.nuevoCliente={nombre:"",email:"",telefono:"",direccion:"",imagen:null},this.imagenPreview=null}cargarClientes(){fetch(this.API_URL).then(t=>t.json()).then(t=>{this.clientes=t.map(e=>S(v({},e),{seleccionado:!1})),this.clientesFiltrados=[...this.clientes]}).catch(t=>{console.error("Error al cargar clientes:",t),alert("Error al cargar clientes")})}filtrarClientes(){let t=this.filtroBusqueda.toLowerCase();this.clientesFiltrados=this.clientes.filter(e=>e.nombre.toLowerCase().includes(t)||e.email.toLowerCase().includes(t))}seleccionarTodos(){this.clientes.forEach(t=>t.seleccionado=!0)}imprimirSeleccionados(){let t=this.clientes.filter(e=>e.seleccionado);console.log("Clientes seleccionados:",t),alert("Clientes seleccionados: "+t.map(e=>e.nombre).join(", "))}cambiarSegmento(t){this.segmentoActivo=t}};g.\u0275fac=function(e){return new(e||g)},g.\u0275cmp=E({type:g,selectors:[["app-tab2"]],decls:49,vars:11,consts:[["slot","end"],[3,"click"],[3,"fullscreen"],[3,"ngModelChange","ngModel"],["value","agregar","content-id","agregar"],["value","editar","content-id","editar"],["value","lista","content-id","lista"],["id","agregar"],[4,"ngIf"],["label","Nombre","fill","outline",3,"ngModelChange","ngModel"],["label","Email","fill","outline",3,"ngModelChange","ngModel"],["label","Tel\xE9fono","fill","outline",3,"ngModelChange","ngModel"],["label","Direcci\xF3n","fill","outline",3,"ngModelChange","ngModel"],["type","file","accept","image/*",3,"change"],["expand","block",3,"click"],["id","editar"],["placeholder","Buscar por nombre o email","label","Buscar","label-placement","floating","fill","outline",3,"ngModelChange","ionInput","ngModel"],[4,"ngFor","ngForOf"],["id","lista"],[2,"width","100px",3,"src"],["fill","clear","color","danger","size","small",3,"click"],["style","width: 80px;",3,"src",4,"ngIf"],["fill","clear","color","danger",3,"click"],["expand","block","color","success",3,"click"],["expand","block","color","danger",3,"click"],[2,"width","80px",3,"src"],["lines","none"],["slot","start",3,"ngModelChange","ngModel"],["slot","start",4,"ngIf"],["slot","start"],["alt","Imagen del cliente",3,"src"]],template:function(e,n){e&1&&(o(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),c(3,"Clientes"),i(),o(4,"ion-buttons",0)(5,"ion-button",1),m("click",function(){return n.seleccionarTodos()}),c(6,"Seleccionar Todos"),i(),o(7,"ion-button",1),m("click",function(){return n.imprimirSeleccionados()}),c(8,"Imprimir Seleccionados"),i()()()(),o(9,"ion-content",2)(10,"ion-segment",3),u("ngModelChange",function(l){return p(n.segmentoActivo,l)||(n.segmentoActivo=l),l}),o(11,"ion-segment-button",4)(12,"ion-label"),c(13,"Agregar"),i()(),o(14,"ion-segment-button",5)(15,"ion-label"),c(16,"Editar / Eliminar"),i()(),o(17,"ion-segment-button",6)(18,"ion-label"),c(19,"Lista"),i()()(),o(20,"ion-segment-view")(21,"ion-segment-content",7)(22,"ion-card")(23,"ion-card-header")(24,"ion-card-title"),c(25,"Agregar Cliente"),i()(),o(26,"ion-card-content"),x(27,ce,4,1,"div",8),o(28,"ion-input",9),u("ngModelChange",function(l){return p(n.nuevoCliente.nombre,l)||(n.nuevoCliente.nombre=l),l}),i(),o(29,"ion-input",10),u("ngModelChange",function(l){return p(n.nuevoCliente.email,l)||(n.nuevoCliente.email=l),l}),i(),o(30,"ion-input",11),u("ngModelChange",function(l){return p(n.nuevoCliente.telefono,l)||(n.nuevoCliente.telefono=l),l}),i(),o(31,"ion-input",12),u("ngModelChange",function(l){return p(n.nuevoCliente.direccion,l)||(n.nuevoCliente.direccion=l),l}),i(),o(32,"input",13),m("change",function(l){return n.cargarImagen(l)}),i(),o(33,"ion-button",14),m("click",function(){return n.guardarCliente()}),c(34,"Guardar"),i()()()(),o(35,"ion-segment-content",15)(36,"ion-card")(37,"ion-card-content")(38,"ion-input",16),u("ngModelChange",function(l){return p(n.filtroBusqueda,l)||(n.filtroBusqueda=l),l}),m("ionInput",function(){return n.filtrarClientes()}),i()()(),x(39,se,17,6,"ion-card",17),i(),o(40,"ion-segment-content",18)(41,"ion-card")(42,"ion-card-content")(43,"ion-button",14),m("click",function(){return n.seleccionarTodos()}),c(44,"Seleccionar Todos"),i(),o(45,"ion-button",14),m("click",function(){return n.imprimirSeleccionados()}),c(46,"Imprimir Seleccionados"),i()()(),x(47,me,19,6,"ion-card",17)(48,_e,3,0,"ion-card",8),i()()()),e&2&&(a(9),b("fullscreen",!0),a(),_("ngModel",n.segmentoActivo),a(17),b("ngIf",n.imagenPreview),a(),_("ngModel",n.nuevoCliente.nombre),a(),_("ngModel",n.nuevoCliente.email),a(),_("ngModel",n.nuevoCliente.telefono),a(),_("ngModel",n.nuevoCliente.direccion),a(7),_("ngModel",n.filtroBusqueda),a(),b("ngForOf",n.clientesFiltrados),a(8),b("ngForOf",n.clientes),a(),b("ngIf",n.clientes.length===0))},dependencies:[k,I,O,B,L,V,G,$,Z,q,R,z,D,N,ne,j,te,Y,Q,X,K,ee,J,A,H,U],styles:["ion-icon[_ngcontent-%COMP%]{color:#ff0}#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}ion-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;margin:5% auto;box-shadow:0 2px 6px #01ffd5;transition:transform .2s ease-in-out,box-shadow .2s ease-in-out}ion-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #c2f801;border-radius:12px;transform:scale(1.01)}ion-input[_ngcontent-%COMP%]{margin-top:10px;color:#9acd32;padding-bottom:19px;--padding-start: 12px;border-radius:12px;--border: 1px solid #ff0000;--highlight-color-focused: #00ff00;--color-focused: #00ff00;--border-color: #00ff00}ion-input[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #cff801;border-radius:12px}ion-input[_ngcontent-%COMP%]:focus-within{--border: 2px solid #3880ff}ion-button[_ngcontent-%COMP%]:hover{color:#37ff00;background-color:#0f0;box-shadow:0 4px 12px #cff801;border-radius:12px}ion-segment[_ngcontent-%COMP%]{border-radius:8px;border-color:#0f0;background-color:#fff}ion-content[_ngcontent-%COMP%]{--padding-bottom: env(keyboard-inset-bottom);background-color:#0000}.scrollable-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding-bottom:100px}ion-title[_ngcontent-%COMP%]{background-color:#0000;text-align:center}ion-header[_ngcontent-%COMP%]{color:#000;background-color:#0f0}ion-toolbar[_ngcontent-%COMP%]{color:#ff0;background-color:#000}ion-header[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]{--background: #000 !important;background-color:#000!important}ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{text-align:center;width:100%;justify-content:center;display:flex}.titulo-con-imagen[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;color:#ff0}.icono-izquierda[_ngcontent-%COMP%]{width:24px;height:24px}#Titulo_proveedor[_ngcontent-%COMP%]{color:#0f0}@media (max-width: 480px){ion-card[_ngcontent-%COMP%]{margin:10px}ion-button[_ngcontent-%COMP%]{width:90%}.preview-img[_ngcontent-%COMP%]{width:100px;height:100px}}@media (min-width: 481px) and (max-width: 1024px){ion-card[_ngcontent-%COMP%]{margin:20px}ion-button[_ngcontent-%COMP%]{width:60%}.preview-img[_ngcontent-%COMP%]{width:120px;height:120px}}@media (min-width: 1025px){ion-card[_ngcontent-%COMP%]{width:40%}ion-button[_ngcontent-%COMP%]{width:33%}.preview-img[_ngcontent-%COMP%]{width:140px;height:140px}}ion-label[_ngcontent-%COMP%]{color:#000}ion-content[_ngcontent-%COMP%]{background-color:#0000}.scrollable-card-content[_ngcontent-%COMP%]{max-height:70vh;overflow-y:auto}.preview-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.preview-img[_ngcontent-%COMP%]{width:140px;height:140px;object-fit:cover;border-radius:12px;box-shadow:0 2px 8px #00ff8466;margin-bottom:8px}ion-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;margin:5% auto;box-shadow:0 2px 6px #01ffd5}ion-input[_ngcontent-%COMP%]{margin-top:10px;--padding-start: 12px;border-radius:12px;--border: 1px solid #ff0000;--highlight-color-focused: #00ff00}ion-button[_ngcontent-%COMP%]{width:80%;max-width:300px;margin:10px auto;border-radius:8px;display:block}@media (max-width: 480px){ion-card[_ngcontent-%COMP%]{margin:10px}.preview-img[_ngcontent-%COMP%]{width:100px;height:100px}}@media (min-width: 1025px){ion-card[_ngcontent-%COMP%]{width:40%}.preview-img[_ngcontent-%COMP%]{width:140px;height:140px}}"]});let d=g;return d})()});pe();export{Pe as Tab2Page};
